/*	
 *	jQuery mmenu 2.0.1
 *	
 *	Copyright (c) 2013 Fred Heusschen
 *	www.frebsite.nl
 *
 *	Dual licensed under the MIT and GPL licenses.
 *	http://en.wikipedia.org/wiki/MIT_License
 *	http://en.wikipedia.org/wiki/GNU_General_Public_License
 */


(function(a){function k(b){if("string"==typeof b)switch(b){case"top":case"right":case"bottom":case"left":b={position:b}}return"object"!=typeof b&&(b={}),b.addCounters!==void 0&&(a.fn.mmenu.deprecated("addCounters-option","counters.add-option"),b.counters={add:b.addCounters}),b.closeOnClick!==void 0&&(a.fn.mmenu.deprecated("closeOnClick-option","onClick.close-option"),b.onClick={close:b.closeOnClick}),"boolean"==typeof b.onClick?b.onClick={close:b.onClick}:"object"!=typeof b.onClick&&(b.onClick={}),b}function l(b){if("boolean"==typeof b.onClick.delayPageload&&(b.onClick.delayPageload=b.onClick.delayPageload?b.configuration.slideDuration:0),a.fn.mmenu.useOverflowScrollingFallback())switch(b.position){case"top":case"bottom":a.fn.mmenu.debug('position: "'+b.position+'" not possible when using the overflowScrolling-fallback.'),b.position="left"}return b}function m(b,c){return b||(b=a("> "+c.pageNodetype,d),b.length>1&&(b=b.wrapAll("<"+c.pageNodetype+" />").parent()),b.addClass(y("page"))),b}function n(b,c,d){return b.is(d.menuNodetype)||(b=a("<"+d.menuNodetype+" />").append(b)),b.prependTo("body").addClass(y("").slice(0,-1)).addClass(y(c)),a("li."+d.selectedClass,b).removeClass(d.selectedClass).addClass(y("selected")),a("li."+d.labelClass,b).removeClass(d.labelClass).addClass(y("label")),b}function o(b,c,d){b.addClass(y(c)),a("ul ul",b).addClass(y("submenu")).each(function(b){var e=a(this),f=e.parent(),g=f.find("> a, > span"),h=f.parent(),i=e.attr("id")||y("s"+d+"-"+b);e.data(z("parent"),h),f.data(z("sub"),e),e.attr("id",i);var j=a('<a class="'+y("subopen")+'" href="#'+i+'" />').insertBefore(g);if(g.is("a")||j.addClass(y("fullsubopen")),"horizontal"==c){var i=h.attr("id")||y("p"+d+"-"+b);h.attr("id",i),e.prepend('<li class="'+y("subtitle")+'"><a class="'+y("subclose")+'" href="#'+i+'">'+g.text()+"</a></li>")}}),"horizontal"==c?(a("li."+y("selected"),b).parents("li."+y("selected")).removeClass(y("selected")).end().each(function(){var b=a(this),c=b.find("> ul");c.length&&(b.parent().addClass(y("subopened")).addClass(y("subopening")),c.addClass(y("opened")))}).parent().addClass(y("opened")).parents("ul").addClass(y("subopened")).addClass(y("subopening")),a("ul."+y("opened"),b).length||a("ul",b).not("."+y("submenu")).addClass(y("opened")),a("ul ul",b).appendTo(b)):a("li."+y("selected"),b).addClass(y("opened")).parents("."+y("selected")).removeClass(y("selected"))}function p(b,c){return b||(b=a('<div id="'+y("blocker")+'" />').appendTo(d)),x(b,function(){c.trigger(A("close"))},!0),b}function q(b,d){if(d.close){var f=a("a",b).not("."+y("subopen")).not("."+y("subclose"));x(f,function(){var e=a(this),g=e.attr("href");b.trigger(A("close")),f.parent().removeClass(y("selected")),e.parent().addClass(y("selected")),d.blockUI&&"#"!=g.slice(0,1)&&c.addClass(y("blocking")),"#"!=g&&setTimeout(function(){window.location.href=g},d.delayPageload)})}}function r(b,c){var d=b.attr("id");d&&d.length&&x('a[href="#'+d+'"]',function(){b.trigger(A("toggle"))});var d=c.attr("id");d&&d.length&&x('a[href="#'+d+'"]',function(){b.trigger(A("close"))}),x(a("a."+y("subopen"),b),function(){var b=a(this).parent().data(z("sub"));b&&b.trigger(A("open"))}),x(a("a."+y("subclose"),b),function(){a(this).parent().parent().trigger(A("close"))})}function s(a,d){var f=w();g.not(a).trigger(A("close")),d.configuration.hardwareAcceleration&&c.addClass(y("accelerated")),e.data(z("style"),e.attr("style")||"").data(z("scrollTop"),f);var h=0;return b.bind(A("resize"),function(){var c=b.width();c!=h&&(h=c,e.width(c))}).trigger(A("resize")),a.addClass(y("opened")),c.addClass(y("opened")).addClass(y(d.position)),e.scrollTop(f),setTimeout(function(){a.trigger(A("opening")),c.addClass(y("opening")),setTimeout(function(){a.trigger(A("opened"))},d.configuration.slideDuration)},25),"open"}function t(a,d){return a.trigger(A("closing")),c.removeClass(y("opening")),setTimeout(function(){a.trigger(A("closed")).removeClass(y("opened")),c.removeClass(y("opened")).removeClass(y(d.position)).removeClass(y("accelerated")),e.attr("style",e.data(z("style"))),b.unbind(A("resize")),h&&h.scrollTop(e.data(z("scrollTop")))},d.configuration.slideDuration+25),"close"}function u(a){d.scrollTop(0),c.scrollTop(0),a.removeClass(y("subopening")).addClass(y("opened"));var e=a.data(z("parent"));return e&&e.addClass(y("subopening")),"open"}function v(a,b){var c=a.data(z("parent"));return c&&c.removeClass(y("subopening")),setTimeout(function(){a.removeClass(y("opened"))},b.configuration.slideDuration+25),"close"}function w(){return h||(0!=c.scrollTop()?h=c:0!=d.scrollTop()&&(h=d)),h?h.scrollTop():0}function x(b,c,d){"string"==typeof b&&(b=a(b));var e=d?a.fn.mmenu.support.touch?A("touchstart"):A("mousedown"):A("click");b.bind(e,function(a){a.preventDefault(),a.stopPropagation(),c.call(this,a)})}function y(a){return"mmenu-"+a}function z(a){return"mmenu-"+a}function A(a){return a+".mmenu"}var b=null,c=null,d=null,e=null,f=null,g=a(),h=null;a.fn.mmenu=function(h){return b||(b=a(window),c=a("html"),d=a("body"),a.fn.mmenu.useOverflowScrollingFallback(j)),h=k(h),h=a.extend(!0,{},a.fn.mmenu.defaults,h),h=l(h),this.each(function(){var b=a(this),c=!1,d=h.slidingSubmenus?"horizontal":"vertical";g=g.add(b),i++,e=m(e,h.configuration),f=p(f,b,h.configuration),b=n(b,h.position,h.configuration),o(b,d,i),q(b,h.onClick,h.configuration),r(b,e),a.fn.mmenu.counters(b,h.counters,h.configuration),a.fn.mmenu.search(b,h.searchfield);var j=b.find("ul");b.add(j).bind(A("toggle")+" "+A("open")+" "+A("close"),function(a){a.preventDefault(),a.stopPropagation()}),b.bind(A("toggle"),function(){return b.triggerHandler(A(c?"close":"open"))}).bind(A("open"),function(){return c?!1:(c=!0,s(b,h))}).bind(A("close"),function(){return c?(c=!1,t(b,h)):!1}),"horizontal"==d?j.bind(A("toggle"),function(){return a(this).triggerHandler(A("open"))}).bind(A("open"),function(){return u(a(this),h)}).bind(A("close"),function(){return v(a(this),h)}):j.bind(A("toggle"),function(){var c=a(this);return c.triggerHandler(A(c.parent().hasClass(y("opened"))?"close":"open"))}).bind(A("open"),function(){return a(this).parent().addClass(y("opened")),"open"}).bind(A("close"),function(){return a(this).parent().removeClass(y("opened")),"close"})})},a.fn.mmenu.defaults={position:"left",slidingSubmenus:!0,onClick:{close:!0,delayPageload:!0,blockUI:!1},configuration:{hardwareAcceleration:!0,selectedClass:"Selected",labelClass:"Label",counterClass:"Counter",pageNodetype:"div",menuNodetype:"nav",slideDuration:500}},a.fn.mmenu.search=function(b,c){if("boolean"==typeof c?c={add:c,search:c}:"string"==typeof search&&(c={add:!0,search:!0,placeholder:c}),"object"!=typeof c&&(c={}),c=a.extend(!0,{},a.fn.mmenu.search.defaults,c),c.add){var d=a('<div class="'+y("search")+'" />').prependTo(b);d.append('<input placeholder="'+c.placeholder+'" type="text" autocomplete="off" />'),c.noResults&&a("ul",b).not("."+y("submenu")).append('<li class="'+y("noresults")+'">'+c.noResults+"</li>")}if(c.search){var d=a("div."+y("search"),b),e=a("input",d),f=a("li."+y("label"),b),g=a("em."+y("counter"),b),h=a("li",b).not("."+y("subtitle")).not("."+y("label")).not("."+y("noresults")),i="> a";c.showLinksOnly||(i+=", > span"),e.bind(A("keyup"),function(){e.trigger(A("search"))}),b.bind(A("reset")+" "+A("search"),function(a){a.preventDefault(),a.stopPropagation()}),b.bind(A("reset"),function(){e.val(""),b.trigger(A("search"))}),b.bind(A("search"),function(c,d){"string"==typeof d?e.val(d):d=e.val().toLowerCase(),h.add(f).addClass(y("noresult")),h.each(function(){var b=a(this);a(i,b).text().toLowerCase().indexOf(d)>-1&&b.add(b.prevAll("."+y("label")).first()).removeClass(y("noresult"))}),a(a("ul."+y("submenu"),b).get().reverse()).each(function(){var c=a(this),d=null,e=c.attr("id"),f=c.find("li").not("."+y("subtitle")).not("."+y("label")).not("."+y("noresult"));e&&e.length&&(d=a("a."+y("subopen"),b).filter('[href="#'+e+'"]').parent()),f.length?d&&(d.removeClass(y("noresult")),d.removeClass(y("nosubresult"))):(c.trigger(A("close")),d&&d.addClass(y("nosubresult")))}),b[h.not("."+y("noresult")).length?"removeClass":"addClass"](y("noresults")),g.trigger(A("count"))})}},a.fn.mmenu.search.defaults={add:!1,search:!0,showLinksOnly:!0,placeholder:"Search",noResults:"No results found."},a.fn.mmenu.counters=function(b,c,d){"boolean"==typeof c&&(c={add:c,count:c}),"object"!=typeof c&&(c={}),c=a.extend(!0,{},a.fn.mmenu.counters.defaults,c),a("em."+d.counterClass,b).removeClass(d.counterClass).addClass(y("counter")),c.add&&a("."+y("submenu"),b).each(function(){var c=a(this),d=c.attr("id");if(d&&d.length){var e=a('<em class="'+y("counter")+'" />'),f=a("a."+y("subopen"),b).filter('[href="#'+d+'"]');f.parent().find("em."+y("counter")).length||f.before(e)}}),c.count&&a("em."+y("counter"),b).each(function(){var c=a(this),d=a("ul"+c.next().attr("href"),b);c.bind(A("count"),function(a){a.preventDefault(),a.stopPropagation();var b=d.children().not("."+y("label")).not("."+y("subtitle")).not("."+y("noresult")).not("."+y("noresults"));c.html(b.length)})}).trigger(A("count"))},a.fn.mmenu.counters.defaults={add:!1,count:!0},a.fn.mmenu.useOverflowScrollingFallback=function(a){return c?("boolean"==typeof a&&c[a?"addClass":"removeClass"](y("no-overflowscrolling")),c.hasClass(y("no-overflowscrolling"))):(j=a,a)},a.fn.mmenu.support={touch:function(){return"ontouchstart"in window.document}(),overflowscrolling:function(){return"WebkitOverflowScrolling"in window.document.documentElement.style}(),oldAndroid:function(){var a=navigator.userAgent;return a.indexOf("Android")>=0?2.4>parseFloat(a.slice(a.indexOf("Android")+8)):!1}()},a.fn.mmenu.debug=function(a){"undefined"!=typeof console&&console.log!==void 0&&console.log("MMENU: "+a)},a.fn.mmenu.deprecated=function(a,b){"undefined"!=typeof console&&console.warn!==void 0&&console.warn("MMENU: "+a+" is deprecated, use "+b+" instead.")};var i=0,j=a.fn.mmenu.support.touch&&!a.fn.mmenu.support.overflowscrolling})(jQuery);